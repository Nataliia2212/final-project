{"version":3,"file":"modal-feedback-5ca5aaa8.js","sources":["../../src/js/heder.js","../../src/js/localStorage.js","../../src/js/quote.js","../../src/img/sprite.svg","../../src/js/modal-feedback.js"],"sourcesContent":["import * as bodyScrollLock from 'body-scroll-lock';\n\n(() => {\n  const refs = {\n    openModalBtn: document.querySelector('[data-modal-open]'),\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    modal: document.querySelector('.js-menu-container'),\n  };\n\n  refs.openModalBtn.addEventListener('click', toggleModal);\n  refs.closeModalBtn.addEventListener('click', toggleModal);\n\n  function toggleModal() {\n    refs.modal.classList.toggle('is-hidden');\n  }\n})();\n\n//mobail menu\n(() => {\n  const mobileMenu = document.querySelector('.js-menu-container');\n  const openMenuBtn = document.querySelector('.js-open-menu');\n  const closeMenuBtn = document.querySelector('.js-close-menu');\n\n  const toggleMenu = () => {\n    const isMenuOpen =\n      openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n    openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n    mobileMenu.classList.toggle('is-open');\n\n    const scrollLockMethod = !isMenuOpen\n      ? 'disableBodyScroll'\n      : 'enableBodyScroll';\n    bodyScrollLock[scrollLockMethod](document.body);\n  };\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  window.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n    if (!e.matches) return;\n    mobileMenu.classList.remove('is-open');\n    openMenuBtn.setAttribute('aria-expanded', false);\n    bodyScrollLock.enableBodyScroll(document.body);\n  });\n})();\n","export const loadFromLS = (keyLS) => {\n  const zip = localStorage.getItem(keyLS);\n  try {\n    const data = JSON.parse(zip);\n    return data;\n  } catch {\n    return zip;\n  }\n}\n\nexport const saveToLS = (key, info) => {\n    const zip = JSON.stringify(info)\n    localStorage.setItem(key, zip)\n}\n\n\n","import axios from 'axios';\nimport { loadFromLS, saveToLS } from './localStorage.js';\n\nconst refs = {\n  quoteText: document.querySelector('.js__quote-text'),\n  quoteAuthor: document.querySelector('.js__quote-author'),\n};\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api/quote';\n\nconst keyStorage = 'currentQuote';\n\nlet storageQuote = null;\n\n\n\nasync function getQuote() {\n  const today = new Date();\n  const currentDay = today.getDate();\n\n  const storageDate = loadFromLS(keyStorage); \n\n\n  if ((storageDate && currentDay !== storageDate.currentDay) || storageDate === null) {\n    await setFetchQuote(currentDay);\n    addDataQuoteInHTML()\n    console.log('A new day has been come.');\n  } else {\n    addDataQuoteInHTML()\n    console.log('It is the same day, yet.');\n  }\n}\n\ngetQuote();\n\nasync function setFetchQuote(currentDay) {\n  const { data } = await axios.get(BASE_URL);\n\n  const quoteData = {\n    currentDay,\n    data,\n  };\n\n  saveToLS(keyStorage, quoteData);\n}\n\nfunction addDataQuoteInHTML() {\n    storageQuote = loadFromLS(keyStorage);\n    refs.quoteText.textContent = storageQuote.data.quote;\n    refs.quoteAuthor.textContent = storageQuote.data.author;\n}\n","export default \"__VITE_ASSET__2f189e13__\"","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst refs = {\n  openModalBtn: document.querySelector('.modal-give-rating'),\n  closeModalBtn: document.querySelector('[data-modal-close-btn]'),\n  modal: document.querySelector('[data-modal]'),\n};\n\n\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n  refs.modal.classList.add('is-hidden');\n\n}\nlet rate = null;\nconst stars = document.querySelectorAll('.star');\nconst formElemEmail = document.querySelector('.input-email');\nconst formElemComment = document.querySelector('.modal-input-comment');\n\nstars.forEach(star => {\n  star.addEventListener('click', () => {\n    const isActive = star.classList.contains('active');\n\n    stars.forEach(s => s.classList.remove('active'));\n\n    if (!isActive) {\n      star.classList.add('active');\n      let prev = star.previousElementSibling;\n      while (prev) {\n        prev.classList.add('active');\n        prev = prev.previousElementSibling;\n      }\n    }\n    rate = star.previousElementSibling.value;\n    console.log('Вибрана опція:', rate);\n  });\n});\n\ndocument\n  .querySelector('.form-rating')\n  .addEventListener('submit', function (event) {\n    event.preventDefault();\n\n    const emailValue = formElemEmail.value;\n    const commentValue = formElemComment.value;\n    const emailPattern = /^[\\w-]+(\\.[\\w-]+)*@([\\w-]+\\.)+[a-zA-Z]{2,7}$/;\n\n    if (emailPattern.test(emailValue)) {\n      const id = event.target.parentNode.dataset.id;\n      const dataRating = {\n        rating: rate,\n        email: emailValue,\n        review: commentValue,\n      };\n\n      console.log(id);\n      fetchUpdateRating(id, dataRating)\n        .then(() => {\n          refs.modal.classList.add('is-hidden');\n          let id = refs.openModalBtn.id;\n        })\n        .catch(error => {\n          iziToast.error({\n            position: 'topRight',\n            message: error.response.data.message,\n          });\n        });\n    } else {\n      iziToast.error({\n        position: 'topRight',\n        message: 'Неправильний формат електронної пошти!',\n      });\n    }\n  });\n\nasync function fetchUpdateRating(id, dataRating) {\n  const BASE_URL = 'https://energyflow.b.goit.study/api';\n  const END_POINT = `/exercises/${id}/rating`;\n  const url = BASE_URL + END_POINT;\n\n  return axios.patch(url, dataRating);\n}\nrefs.openModalBtn.addEventListener('click', e => {\n  const id = e.target.dataset.id;\n  showModal(id);\n});\n\nfunction showModal(id) {\n  refs.modal.classList.remove('visually-hidden');\n  refs.modal.firstElementChild.setAttribute('data-id', id);\n}\n\n"],"names":["refs","toggleModal","mobileMenu","openMenuBtn","closeMenuBtn","toggleMenu","isMenuOpen","bodyScrollLock","e","bodyScrollLock.enableBodyScroll","loadFromLS","keyLS","zip","saveToLS","key","info","BASE_URL","keyStorage","storageQuote","getQuote","currentDay","storageDate","setFetchQuote","addDataQuoteInHTML","data","axios","img","rate","stars","formElemEmail","formElemComment","star","isActive","s","prev","event","emailValue","commentValue","id","dataRating","fetchUpdateRating","error","iziToast","END_POINT","url","showModal"],"mappings":"qwBAEC,IAAM,CACL,MAAMA,EAAO,CACX,aAAc,SAAS,cAAc,mBAAmB,EACxD,cAAe,SAAS,cAAc,oBAAoB,EAC1D,MAAO,SAAS,cAAc,oBAAoB,CACtD,EAEEA,EAAK,aAAa,iBAAiB,QAASC,CAAW,EACvDD,EAAK,cAAc,iBAAiB,QAASC,CAAW,EAExD,SAASA,GAAc,CACrBD,EAAK,MAAM,UAAU,OAAO,WAAW,CACxC,CACH,MAGC,IAAM,CACL,MAAME,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAa,IAAM,CACvB,MAAMC,EACJH,EAAY,aAAa,eAAe,IAAM,QAAU,GAC1DA,EAAY,aAAa,gBAAiB,CAACG,CAAU,EACrDJ,EAAW,UAAU,OAAO,SAAS,EAKrCK,EAH0BD,EAEtB,mBADA,mBAE2B,EAAE,SAAS,IAAI,CAClD,EAEEH,EAAY,iBAAiB,QAASE,CAAU,EAChDD,EAAa,iBAAiB,QAASC,CAAU,EAEjD,OAAO,WAAW,oBAAoB,EAAE,iBAAiB,SAAUG,GAAK,CACjEA,EAAE,UACPN,EAAW,UAAU,OAAO,SAAS,EACrCC,EAAY,aAAa,gBAAiB,EAAK,EAC/CM,EAAgC,SAAS,IAAI,EACjD,CAAG,CACH,GAAI,EC5CQ,MAACC,EAAcC,GAAU,CACnC,MAAMC,EAAM,aAAa,QAAQD,CAAK,EACtC,GAAI,CAEF,OADa,KAAK,MAAMC,CAAG,CAE/B,MAAU,CACN,OAAOA,CACR,CACH,EAEaC,EAAW,CAACC,EAAKC,IAAS,CACnC,MAAMH,EAAM,KAAK,UAAUG,CAAI,EAC/B,aAAa,QAAQD,EAAKF,CAAG,CACjC,ECVMZ,EAAO,CACX,UAAW,SAAS,cAAc,iBAAiB,EACnD,YAAa,SAAS,cAAc,mBAAmB,CACzD,EAEMgB,EAAW,4CAEXC,EAAa,eAEnB,IAAIC,EAAe,KAInB,eAAeC,GAAW,CAExB,MAAMC,EADQ,IAAI,OACO,UAEnBC,EAAcX,EAAWO,CAAU,EAGpCI,GAAeD,IAAeC,EAAY,YAAeA,IAAgB,MAC5E,MAAMC,EAAcF,CAAU,EAC9BG,EAAoB,EACpB,QAAQ,IAAI,0BAA0B,IAEtCA,EAAoB,EACpB,QAAQ,IAAI,0BAA0B,EAE1C,CAEAJ,IAEA,eAAeG,EAAcF,EAAY,CACvC,KAAM,CAAE,KAAAI,CAAI,EAAK,MAAMC,EAAM,IAAIT,CAAQ,EAOzCH,EAASI,EALS,CAChB,WAAAG,EACA,KAAAI,CACJ,CAEgC,CAChC,CAEA,SAASD,GAAqB,CAC1BL,EAAeR,EAAWO,CAAU,EACpCjB,EAAK,UAAU,YAAckB,EAAa,KAAK,MAC/ClB,EAAK,YAAY,YAAckB,EAAa,KAAK,MACrD,CClDA,MAAeQ,EAAA,4CCGT1B,EAAO,CACX,aAAc,SAAS,cAAc,oBAAoB,EACzD,cAAe,SAAS,cAAc,wBAAwB,EAC9D,MAAO,SAAS,cAAc,cAAc,CAC9C,EAGAA,EAAK,cAAc,iBAAiB,QAASC,CAAW,EAExD,SAASA,GAAc,CACrBD,EAAK,MAAM,UAAU,IAAI,WAAW,CAEtC,CACA,IAAI2B,EAAO,KACX,MAAMC,EAAQ,SAAS,iBAAiB,OAAO,EACzCC,EAAgB,SAAS,cAAc,cAAc,EACrDC,EAAkB,SAAS,cAAc,sBAAsB,EAErEF,EAAM,QAAQG,GAAQ,CACpBA,EAAK,iBAAiB,QAAS,IAAM,CACnC,MAAMC,EAAWD,EAAK,UAAU,SAAS,QAAQ,EAIjD,GAFAH,EAAM,QAAQK,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAE3C,CAACD,EAAU,CACbD,EAAK,UAAU,IAAI,QAAQ,EAC3B,IAAIG,EAAOH,EAAK,uBAChB,KAAOG,GACLA,EAAK,UAAU,IAAI,QAAQ,EAC3BA,EAAOA,EAAK,sBAEf,CACDP,EAAOI,EAAK,uBAAuB,MACnC,QAAQ,IAAI,iBAAkBJ,CAAI,CACtC,CAAG,CACH,CAAC,EAED,SACG,cAAc,cAAc,EAC5B,iBAAiB,SAAU,SAAUQ,EAAO,CAC3CA,EAAM,eAAc,EAEpB,MAAMC,EAAaP,EAAc,MAC3BQ,EAAeP,EAAgB,MAGrC,GAFqB,+CAEJ,KAAKM,CAAU,EAAG,CACjC,MAAME,EAAKH,EAAM,OAAO,WAAW,QAAQ,GACrCI,EAAa,CACjB,OAAQZ,EACR,MAAOS,EACP,OAAQC,CAChB,EAEM,QAAQ,IAAIC,CAAE,EACdE,EAAkBF,EAAIC,CAAU,EAC7B,KAAK,IAAM,CACVvC,EAAK,MAAM,UAAU,IAAI,WAAW,EAC3BA,EAAK,aAAa,EACrC,CAAS,EACA,MAAMyC,GAAS,CACdC,EAAS,MAAM,CACb,SAAU,WACV,QAASD,EAAM,SAAS,KAAK,OACzC,CAAW,CACX,CAAS,CACT,MACMC,EAAS,MAAM,CACb,SAAU,WACV,QAAS,wCACjB,CAAO,CAEP,CAAG,EAEH,eAAeF,EAAkBF,EAAIC,EAAY,CAC/C,MAAMvB,EAAW,sCACX2B,EAAY,cAAcL,CAAE,UAC5BM,EAAM5B,EAAW2B,EAEvB,OAAOlB,EAAM,MAAMmB,EAAKL,CAAU,CACpC,CACAvC,EAAK,aAAa,iBAAiB,QAASQ,GAAK,CAC/C,MAAM8B,EAAK9B,EAAE,OAAO,QAAQ,GAC5BqC,EAAUP,CAAE,CACd,CAAC,EAED,SAASO,EAAUP,EAAI,CACrBtC,EAAK,MAAM,UAAU,OAAO,iBAAiB,EAC7CA,EAAK,MAAM,kBAAkB,aAAa,UAAWsC,CAAE,CACzD"}